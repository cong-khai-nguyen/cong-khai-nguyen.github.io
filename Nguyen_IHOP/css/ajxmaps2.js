// Ajatix Maps & Directions
// Copyright (C) 2011-2016 Ajatix. All rights reserved.
// http://www.ajatix.com
// Unregistered copy.
// Any usage except for the purpose of evaluation is strictly prohibited.
(function(){window.AjatixMaps=window.AjatixMaps||{};function onLoad(){var on='AJXMAPPcGHPTB';var am=window.AjatixMaps;var gm=google.maps;var dirC='#0000C8';var udirC='#C80000';var UserDir=false;var SCRIPT_LOCATION='';setPathAdjustment();var mapOptions={backgroundColor:'#ffffff',center:new gm.LatLng(45,-98),keyboardShortcuts:false,panControl:true,mapTypeControl:false,scaleControl:true,overviewMapControl:true,mapTypeId:gm.MapTypeId.HYBRID};am.maps=am.maps||new Array();   am.geocoder=am.geocoder||new gm.Geocoder();am.directionsService=am.directionsService||new gm.DirectionsService();am.directionDisplay=am.directionDisplay||new Array();am.maps[on]=new gm.Map(document.getElementById(on+'map'), mapOptions);am.directionDisplay[on]=new gm.DirectionsRenderer({draggable:true,markerOptions:{icon:new gm.MarkerImage(adjustPath("*ajxmaps2_files/dirmarker.png"),new gm.Size(29,38), new gm.Point(0,0), new gm.Point(0,38)),shadow:new gm.MarkerImage(adjustPath("*ajxmaps2_files/shadowdirmarker.png"),new gm.Size(49,38), new gm.Point(0,0), new gm.Point(0,38))},map:am.maps[on]});gm.event.addListener(am.maps[on], 'click', function(event){am.loc=event.latLng;});function setPathAdjustment(){var sl='';var dv=document.getElementsByTagName('div');for(var i=0;i<dv.length;++i){if(dv[i].id==on){var pos=dv[i].innerHTML.search('AJXFILE:');if(pos>-1){var s=dv[i].innerHTML.substr(pos+8,dv[i].innerHTML.search('-->')-(pos+8));var pend= s.lastIndexOf('/');if(pend>-1){sl=s.substr(0,++pend);}}break;}}SCRIPT_LOCATION=sl;}function adjustPath(path){var idf=path.charAt(0);if(idf=='*')return SCRIPT_LOCATION+path.substr(1);return path;}function getAddress(r){var address='';for(var j=0;j<r[0].address_components.length;++j){address+=' '+r[0].address_components[j].short_name;}return address;}var pushpins=[{address:'5790 FM 1960 W, Houston, TX 77069',latitude:null,longitude:null,title:'',description:'',inroute:false,ibopen:false,custmarker:{src:adjustPath("*ajxmaps2_files/markers/ihop_logo_detail_colorcorrected.jpeg")}}];var curpushpin=0;while(curpushpin<pushpins.length&&pushpins[curpushpin].latitude)++curpushpin;if(curpushpin<pushpins.length){getGeocode(pushpins[curpushpin].address);}else{ShowPushpins();}gm.event.addListenerOnce(am.maps[on], 'tilesloaded', function(){for(var i=0;i<pushpins.length;++i){if(pushpins[i].ibopen){if(pushpins[i].ib){pushpins[i].ib.open(am.maps[on], pushpins[i].marker);}}}});function ShowPushpins(){function addInfoWnd(ds, pushpin){pushpin.ib=new gm.InfoWindow({content:ds});gm.event.addListener(pushpin.marker, 'click', function(){pushpin.ib.open(am.maps[on], pushpin.marker);});};for(var i=0;i<pushpins.length;++i){if(pushpins[i].latitude&&pushpins[i].longitude){var loc=new gm.LatLng(pushpins[i].latitude,pushpins[i].longitude);var ti=unescape(pushpins[i].title), ds=unescape(pushpins[i].description);var custIcon=null;var custShadow=null;if(pushpins[i].custmarker){custIcon={url:pushpins[i].custmarker.src};if(pushpins[i].custmarker.ax){custIcon.anchor=new gm.Point(pushpins[i].custmarker.ax,pushpins[i].custmarker.ay);}if(pushpins[i].custmarker.ssrc){custShadow={url:pushpins[i].custmarker.ssrc};if(pushpins[i].custmarker.asx){custShadow.anchor=new gm.Point(pushpins[i].custmarker.asx,pushpins[i].custmarker.asy);}}}pushpins[i].marker=new gm.Marker({position:loc,map:am.maps[on], title:ti, zIndex:100});if(custIcon!=null)pushpins[i].marker.setIcon(custIcon);if(custShadow!=null)pushpins[i].marker.setShadow(custShadow);if(ds!=''){addInfoWnd(ds, pushpins[i]);}}}if(pushpins[0].latitude&&pushpins[0].longitude){am.maps[on].setCenter(new gm.LatLng(pushpins[0].latitude, pushpins[0].longitude));}var  latlngbounds=new gm.LatLngBounds();for(var i=0;i<pushpins.length;++i){if(pushpins[i].latitude&&pushpins[i].longitude){var loc=new gm.LatLng(pushpins[i].latitude,pushpins[i].longitude);latlngbounds.extend(loc);}}am.maps[on].setCenter(latlngbounds.getCenter());am.maps[on].fitBounds(latlngbounds);}function getGeocode(address){am.geocoder.geocode({address:address}, function(results, status){if(status==gm.GeocoderStatus.OK){var loc=results[0].geometry.location;var lt=results[0].geometry.location.lat();var lg=results[0].geometry.location.lng();if(UserDir==true){var p=pushpins[0];getDirection([{address:p.address,latitude:p.latitude,longitude:p.longitude,inroute:true},{latitude:lt,longitude:lg,inroute:true}], udirC);}else{pushpins[curpushpin].latitude=lt;pushpins[curpushpin].longitude=lg;}}else{if(UserDir==false)++curpushpin;}if(UserDir==false){while(curpushpin<pushpins.length&&pushpins[curpushpin].latitude)++curpushpin;if(curpushpin<pushpins.length){getGeocode(pushpins[curpushpin].address);}else{ShowPushpins();}}});}}function addOnReady(f,fu){var d=document;var isReady=false;ready=function(){if(!isReady){isReady=true;f();};};if(d.addEventListener){d.addEventListener('DOMContentLoaded',ready,false);window.addEventListener('load',ready,false);}if(window.attachEvent)window.attachEvent('onload',ready);if(d.documentElement.doScroll&&window==top){(function(){if(!isReady){try{d.documentElement.doScroll('left');}catch(E){setTimeout(arguments.callee,0);return;}ready();}})()}};addOnReady(onLoad, onLoad);})();